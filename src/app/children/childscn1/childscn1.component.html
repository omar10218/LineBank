<!-- 申請資訊 -->
<div class="line_bank_card_no_padding_child" style="width:95%;margin:10px auto">
  <div class="line_bank_form_header_title">申請資訊</div>
  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">案件編號</span><input matInput #input class="form-control"
          [(ngModel)]="applno" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">姓名</span><input matInput #input class="form-control"
          [(ngModel)]="cuCName" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">客戶ID</span><input matInput #input class="form-control"
          [(ngModel)]="custId" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">身分證字號</span><input matInput #input class="form-control"
          [(ngModel)]="nationalId" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">客戶身分名單註記</span><input matInput #input class="form-control"
          value="待確認" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">申請產品</span><input matInput #input class="form-control"
          [(ngModel)]="prodCode" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">申請金額</span><input matInput #input class="form-control"
          [(ngModel)]="applicationAmount" name="applicationAmount" required placeholder="輸入金額"></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">貸款用途</span><input matInput #input class="form-control"
          [(ngModel)]="purposeCode" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">專案名稱</span><input matInput #input class="form-control"
          value="待確認" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">行銷代碼</span><input matInput #input class="form-control"
          value="待確認" readonly disabled></div>
    </div>
  </div>
</div>
<!-- Channel資訊 -->
<div class="line_bank_card_no_padding_child" style="width:95%;margin:10px auto">
  <div class="line_bank_form_header_title">Channel資訊</div>
  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">申請時GPS</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">申請時IP Address</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">申請時手機型號</span><input matInput #input class="form-control"
          value="" readonly disabled> </div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">申請時Device ID</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">上傳時GPS</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">上傳時IP Address</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">上傳時手機型號</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">上傳時Device ID</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
  </div>
  <div nz-row style="padding:5px">
    <div nz-col nzFlex="3">
      <div style="padding:3px">
        <!-- map -->
        <div id="map" style="height: 400px; width: 100%; z-index: 2;"></div>
        <input matInput #input class="form-control" value="距離：{{ distance }} km" readonly disabled>
      </div>
    </div>
    <!-- <div nz-col nzFlex="1">
      <div style="padding:3px"></div>
    </div>
    <div nz-col nzFlex="4">
      <div style="padding:3px"></div>
    </div> -->
  </div>
</div>

<!-- AML/FDS/CSS/RPM -->
<div class="line_bank_card_no_padding_child" style="width:95%;margin:10px auto">
  <div class="line_bank_form_header_title">AML/FDS/CSS/RPM資訊(最新一筆)</div>
  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">AML代碼</span><input matInput #input class="form-control"
          [(ngModel)]="aml" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">AML說明</span><input matInput #input class="form-control"
          [(ngModel)]="amlDesc" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">查詢日期時間</span><input matInput #input class="form-control"
          [(ngModel)]="amlDate" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">FDS代碼</span><input matInput #input class="form-control"
          [(ngModel)]="fds" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">FDS說明</span><input matInput #input class="form-control"
          [(ngModel)]="fdsDesc" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">查詢日期時間</span><input matInput #input class="form-control"
          [(ngModel)]="fdsDate" readonly disabled></div>
    </div>
  </div>
  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">Score分數</span><input matInput #input class="form-control"
          [(ngModel)]="cssScore" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">Score等級</span><input matInput #input class="form-control"
          [(ngModel)]="cssGrade" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">查詢日期時間</span><input matInput #input class="form-control"
          [(ngModel)]="cssDate" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">是否為利關人</span><input matInput #input class="form-control"
          [(ngModel)]="isRpm" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">關係類型描述</span><input matInput #input class="form-control"
          [(ngModel)]="rpmTypeDescribe" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">關係人ID</span><input matInput #input class="form-control"
          [(ngModel)]="rpmId" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">查詢日期時間</span><input matInput #input class="form-control"
          [(ngModel)]="rpmDate" readonly disabled></div>
    </div>
  </div>
</div>

<!-- DSS決策結果 -->
<div class="line_bank_card_no_padding_child" style="width:95%;margin:10px auto">
  <div class="line_bank_form_header_title">DSS決策結果</div>

  <!-- 1st -->
  <div class="line_bank_form_header_child_title">決策階段-DSS1st</div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">系統流程</span><input matInput #input class="form-control"
          [(ngModel)]="sysflowcdOne" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">決策結果</span><input matInput #input class="form-control"
          [(ngModel)]="resltcdOne" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">案件等級</span><input matInput #input class="form-control"
          [(ngModel)]="calvOne" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">行職業代碼分群代碼/中文</span><input matInput #input class="form-control"
          [(ngModel)]="ocupatnCustGpOne" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">策略客群1代碼/中文</span><input matInput #input class="form-control"
          [(ngModel)]="ocupatnCustStgp1One" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">策略客群2代碼/中文</span><input matInput #input class="form-control"
          [(ngModel)]="ocupatnCustStgp2One" readonly disabled></div>
    </div>
  </div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">往來優質特徵註記(房貸)代碼/中文</span><input matInput #input
          class="form-control" [(ngModel)]="goodbehavMortOne" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">往來優質特徵註記(信用卡)代碼/中文</span><input matInput #input
          class="form-control" [(ngModel)]="goodbehavCcOne" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">風險模型分數</span><input matInput #input class="form-control"
          [(ngModel)]="riskmdscoreA0" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">風險模型等級(策略調整後)</span><input matInput #input class="form-control"
          [(ngModel)]="riskmdgradeA0Adj" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">徵審代碼/中文</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
  </div>
  <br>
  <!-- 2st -->
  <div class="line_bank_form_header_child_title">決策階段-DSS2st</div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">系統流程</span><input matInput #input class="form-control"
          [(ngModel)]="sysflowcdTwo" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">決策結果</span><input matInput #input class="form-control"
          [(ngModel)]="resltcdTwo" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">案件等級</span><input matInput #input class="form-control"
          [(ngModel)]="calvTwo" readonly disabled></div>
    </div>
    <div nz-col nzFlex="3">
      <div style="padding:3px"><span class="form-title">行職業代碼分群代碼/中文</span><input matInput #input class="form-control"
          [(ngModel)]="ocupatnCustGpTwo" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">策略客群1代碼/中文</span><input matInput #input class="form-control"
          [(ngModel)]="ocupatnCustStgp1Two" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">策略客群2代碼/中文</span><input matInput #input class="form-control"
          [(ngModel)]="ocupatnCustStgp2Two" readonly disabled></div>
    </div>
    <div nz-col nzFlex="3">
      <div style="padding:3px"><span class="form-title">往來優質特徵註記(房貸)代碼/中文</span><input matInput #input
          class="form-control" [(ngModel)]="goodbehavMortTwo" readonly disabled></div>
    </div>
    <div nz-col nzFlex="3">
      <div style="padding:3px"><span class="form-title">往來優質特徵註記(信用卡)代碼/中文</span><input matInput #input
          class="form-control" [(ngModel)]="goodbehavCcTwo" readonly disabled></div>
    </div>
  </div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">風險模型分數</span><input matInput #input class="form-control"
          [(ngModel)]="riskmdscoreA1" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">風險模型等級(策略調整後)</span><input matInput #input class="form-control"
          [(ngModel)]="riskmdgradeA1Adj" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">徵審代碼/中文</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">授信策略准駁結果</span><input matInput #input class="form-control"
          [(ngModel)]="strgyAprfrj" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">授信策略額度金額</span><input matInput #input class="form-control"
          [(ngModel)]="strgyLimitReving" readonly disabled></div>
    </div>
    <div nz-col nzFlex="2">
      <div style="padding:3px"><span class="form-title">授信策略每月最低還款比率</span><input matInput #input class="form-control"
          [(ngModel)]="strgyMinpayrt" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">客群標籤/說明</span><input matInput #input class="form-control"
          [(ngModel)]="custTag" readonly disabled></div>
    </div>
  </div>

  <!-- 策略利率類型-固定利率 -->
  <div class="line_bank_form_header_child_title">策略利率類型-固定利率</div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">固定利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">期數最小值</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">期數最大值</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"></div>
    </div>
  </div>

  <!-- 策略利率類型-加減碼利率 -->
  <div class="line_bank_form_header_child_title">策略利率類型-加減碼利率</div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">加碼利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">基準利率類型</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">基準利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">貸放利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">期數最小值</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">期數最大值</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
  </div>

  <!-- 策略利率類型-多階利率 -->
  <div class="line_bank_form_header_child_title">策略利率類型-多階利率</div>

  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">起始期數</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">利率類型</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">固定利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">加碼利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">基準利率類型</span><input matInput #input class="form-control"
          value="" readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">基準利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">貸放利率</span><input matInput #input class="form-control" value=""
          readonly disabled></div>
    </div>
  </div>
</div>

<!-- 審核結果 -->
<div class="line_bank_card_no_padding_child" style="width:95%;margin:10px auto">
  <div class="line_bank_form_header_title">審核結果</div>
  <div nz-row style="padding:5px">
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">產品代號</span><input matInput #input class="form-control"
          value="待確認" readonly></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">專案代號</span><input matInput #input class="form-control"
          value="待確認" readonly></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:2px"><span class="form-title">核決結果</span>
        <mat-select [(ngModel)]="creditResult" name="creditResult" style="height:25px">
          <mat-option *ngFor="let code of creditResultCode" [value]="code.value">
            {{code.viewValue}}
          </mat-option>
        </mat-select>
      </div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">核准額度</span><input matInput #input class="form-control"
          [(ngModel)]="resultApproveAmt" placeholder="輸入額度"
          (ngModelChange)="change(resultApproveAmt,'resultApproveAmt')" (keypress)="numberOnly($event)"></div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">每月最低還款比率</span><input matInput #input class="form-control"
          [(ngModel)]="resultLowestPayRate" placeholder="輸入還款比率"
          (ngModelChange)="change(resultLowestPayRate,'resultLowestPayRate')" (keypress)="numberOnly($event)"></div>
    </div>
  </div>

  <div nz-row>
    <div nz-col nzFlex="1">
      <div style="padding:3px"><span class="form-title">序號</span><input matInput #input class="form-control" value="1"
          placeholder="輸入序號">
      </div>
    </div>
    <div nz-col nzFlex="1">
      <div class="form" style="padding:3px">
        <div><span class="form-title">分段起始期數</span>
          <input matInput #input class="form-control" [(ngModel)]="period" name="period" placeholder="輸入期數">
        </div>
      </div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:1px"><span class="form-title">期別</span>
        <mat-select [(ngModel)]="periodType" name="periodType" style="height:25px">
          <mat-option *ngFor="let code of periodTypeCode" [value]="code.value">
            {{code.viewValue}}
          </mat-option>
        </mat-select>
      </div>
    </div>
    <div nz-col nzFlex="1">
      <div style="padding:1px"><span class="form-title">利率型態</span>
        <mat-select [(ngModel)]="interestType" name="interestType" style="height:25px"
          (ngModelChange)="changeInterest()">
          <mat-option *ngFor="let code of interestTypeCode" [value]="code.value">
            {{code.viewValue}}
          </mat-option>
        </mat-select>
      </div>
    </div>
    <!-- <div nz-col nzFlex="1">
        <div style="padding:3px"><span class="form-title">基準利率型態</span>
          <mat-select [(ngModel)]="interestValue" name="interestValue"
            style="width:30%;height:25px;border-radius:3px;border:none;padding:4px;background-color:#E6E6E6"
            (ngModelChange)="changeInterestValue()">
            <mat-option *ngFor="let code of interestCode" [value]="code.value">
              {{code.viewValue}}
            </mat-option>
          </mat-select>
        </div>
      </div> -->
    <div nz-col nzFlex="2">
      <div class="form" style="padding:3px">
        <div><span class="form-title">當時的指數,基放,郵儲利率</span>
          <input matInput #input class="form-control" [(ngModel)]="interestBase" name="interestBase" readonly>
        </div>
      </div>
    </div>
    <div nz-col nzFlex="1">
      <div class="form" style="padding:3px">
        <div><span class="form-title">利率</span>
          <input matInput #input class="form-control" [(ngModel)]="interest" name="interest"
            (ngModelChange)="caluclate()" placeholder="輸入利率" placeholder="輸入利率">
        </div>
      </div>
    </div>
    <div nz-col nzFlex="1">
      <div class="form" style="padding:3px">
        <div><span class="form-title">核准利率</span>
          <input matInput #input class="form-control" [(ngModel)]="approveInterest" name="approveInterest" disabled>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 審核註記 -->
<div class="line_bank_card_no_padding_child" style="width:95%;margin:10px auto">
  <div class="line_bank_form_header_title">審核註記</div>

  <div nz-row style="padding:5px;text-align: center;">
    <div nz-col nzSpan="24">
      <div class="form">
        <div><span class="form-title"></span><textarea matInput class="input-textarea" [(ngModel)]="mark"
            name="mark"></textarea>
        </div>
      </div>
    </div>


  </div>
  <div style="padding:3px;text-align: center;">
    <button nz-button [nzSize]="'middle'" nzType="primary" style="margin:0px 5px" (click)="save()">儲存</button>
  </div>

  <!-- 表格 -->
  <nz-table nzShowSizeChanger [nzData]="creditmemoSource" [nzFrontPagination]="false" [nzSimple]="true"
    [nzTotal]="total" [nzPageSize]="pageSize" [nzPageIndex]="pageIndex" (nzQueryParams)="onQueryParamsChange($event)"
    nzSize="small" nzTitle="審核意見">
    <thead>
      <tr>
        <th class="table-header" nzWidth="30%">Date</th>
        <th class="table-header" nzWidth="30%">User</th>
        <th class="table-header" nzWidth="40%">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of creditmemoSource">
        <td class="table-data">{{ data.creditdate | date:'yyyy-MM-dd hh:mm:ss' }}</td>
        <td class="table-data">{{ data.credituser }}</td>
        <td class="table-data">{{ data.creditaction }}</td>
      </tr>
    </tbody>
  </nz-table>
</div>
