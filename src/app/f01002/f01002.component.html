<div class="line_bank_bankground_color">
    <div class="header">
        <div nz-row>
            <div nz-col nzFlex="auto" style="background-color: white;">
                <div nz-row>
                    <div nz-col nzSpan="6" style="padding:0px 15px;background-color: #BFECD0;">
                        <div class="form-title line_bank_h3" style="margin:10px 0 ;">案件編號</div>
                        <div class="form" style="display: block;margin-bottom:10px">
                            <div><input matInput #input class="form-control" [(ngModel)]="swcApplno" name="swcApplno"
                                    required>
                            </div>
                        </div>
                    </div>
                    <div nz-col nzSpan="6" style="padding:0px 15px;">
                        <span class="form-title line_bank_h3" style="margin:10px 0 ;">身分證號</span>
                        <div class="form" style="display: block;margin-bottom:10px">
                            <div><input matInput #input class="form-control" [(ngModel)]="swcID" name="swcID" required>
                            </div>
                        </div>
                    </div>
                    <div nz-col nzSpan="6" style="padding:0px 15px;background-color: #BFECD0;">
                        <span class="form-title line_bank_h3" style="margin:10px 0 ;">案件類別</span>
                        <div class="form" style="display: block;margin-bottom:10px">
                            <div>
                                <nz-select [(ngModel)]="caseType" name="caseTypeCode">
                                    <nz-option *ngFor="let code of caseTypeCode" [value]="code.value"
                                        nzValue="code.value" nzLabel=" {{code.viewValue}}"> </nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                    <div nz-col nzSpan="6" style="padding:0px 15px">
                        <span class="form-title line_bank_h3" style="margin:10px 0 ;">代理人別</span>
                        <div class="form" style="display: block;margin-bottom:10px">
                            <div>
                                <nz-select [(ngModel)]="agentEmpNo" name="agentEmpNoCode">
                                    <nz-option *ngFor="let code of agentEmpNoCode" [value]="code.value"
                                        nzValue="  {{code.viewValue}}" nzLabel=" {{code.viewValue}}"> </nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div nz-col nzFlex="200px" style="background-color: #BFECD0;padding-top:10px;text-align: center;">
                <div style="padding-left: 10px;">
                    <button nz-button [nzSize]="'middle'" nzType="primary" (click)="select()">查詢案件</button>
                </div>
            </div>
        </div>
        <div>
        </div>
    </div>
    <div class="content">
        <div class="abs-box">
            <div nz-col nzSpan="24">
                <div class="line_bank_card_no_padding">
                    <nz-table nzShowSizeChanger [nzData]="cusinfoDataSource.data" [nzFrontPagination]="false"
                        [nzSimple]="true" [nzLoading]="loading" [nzTotal]="total" [nzPageSize]="pageSize"
                        [nzPageIndex]="pageIndex" #middleTable nzSize="small" nzTitle="案件申覆清單"
                        [nzScroll]="{ x: '1500px', y: '220px' }" (nzQueryParams)="onQueryParamsChange($event)">
                        <thead style="max-height: 100vh;">
                            <div style="text-align:right;width: 90vw; font-size: 16px;">
                                <span>案件數: {{this.total}} 件</span>
                            </div>
                            <tr>
                                <th class="table-header" [nzLeft]="true" [nzWidth]="'160px'">收件編號</th>
                                <th class="table-header" [nzWidth]="'160px'">流程別</th>
                                <th class="table-header" [nzWidth]="'160px'">是否重查完成</th>
                                <th class="table-header" [nzWidth]="'160px'">進件時間</th>
                                <th class="table-header" [nzWidth]="'160px'">身分證號</th>
                                <th class="table-header" [nzWidth]="'160px'">姓名</th>
                                <th class="table-header" [nzWidth]="'200px'">公司名稱</th>
                                <th class="table-header" [nzWidth]="'160px'">客群標籤</th>
                                <th class="table-header" [nzWidth]="'160px'">申請金額/額度</th>
                                <th class="table-header" [nzWidth]="'160px'">風險等級分群</th>
                                <th class="table-header" [nzWidth]="'160px'">累積進件</th>
                                <th class="table-header" [nzWidth]="'160px'">審核結果</th>
                                <th class="table-header" [nzWidth]="'160px'">通知</th>
                                <th class="table-header" [nzRight]="true" [nzWidth]="'220px'">案件註記</th>
                                <th class="table-header" [nzRight]="true" [nzWidth]="'100px'">儲存</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of cusinfoDataSource.data">
                                <td class="table-data" [nzLeft]="true" [nzWidth]="'160px'" style="text-align: center;">
                                    <button nz-button [nzSize]="'middle'" nzType="link"
                                        *ngIf="data.swcReadyForReview=='N'" [disabled]="true">
                                        {{data.swcApplno}}
                                    </button>
                                    <button nz-button [nzSize]="'middle'" nzType="link"
                                        *ngIf="data.swcReadyForReview=='Y'"
                                        (click)="getLockCase(data.swcApplno, data.swcID)">
                                        {{data.swcApplno}}
                                    </button>
                                </td>
                                <td class="table-data">{{ getOptionCaseType(data.swcFlowType) }}</td>
                                <td class="table-data" [nzWidth]="'110px'">{{ data.swcReadyForReview }}</td>
                                <td class="table-data" [nzWidth]="'100px'">{{ data.swcZ21PassDate |date: 'yyyy-MM-dd' }}
                                </td>
                                <td class="table-data" [nzWidth]="'100px'">{{ data.swcID }}</td>
                                <td class="table-data">{{ data.swcName }}</td>
                                <td class="table-data">{{ data.swcCompany }}</td>
                                <td class="table-data">{{ data.swcCreditLimit }}</td>
                                <td class="table-data">{{ data.swcCusGroupTag }}</td>
                                <td class="table-data">{{ data.swcRiskLevelGroup }}</td>
                                <td class="table-data">{{ data.swcEnterCount }}</td>
                                <td class="table-data">{{ data.swcResult }}</td>
                                <td class="table-data">
                                    <button nz-button id="test" [nzSize]="'middle'" *ngIf="data.swcNotifyMsg==''"
                                        [disabled]="true" nzType="primary">通知</button>
                                    <button nz-button id="test" [nzSize]="'middle'" *ngIf="data.swcNotifyMsg!=''"
                                        (click)="openNotifyMsg(data.swcApplno)" nzType="primary">通知</button>
                                </td>
                                <td class="table-data" [nzRight]="true" [nzWidth]="'200px'">
                                    <input matInput #input class="form-control" [(ngModel)]="data.swcCaseMemo"
                                        name="note" placeholder="請輸入註記" required>
                                </td>
                                <td class="table-data btn_test" [nzRight]="true" style="text-align: center;">
                                    <button nz-button id="test" nzType="primary"
                                        (click)="saveCaseMemo(data.swcApplno, data.swcCaseMemo)">儲存</button>
                                </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
            </div>
        </div>
    </div>
</div>