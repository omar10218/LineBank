<div class="line_bank_bankground_color">
  <div class="header">
    <div nz-row style="width:95%;margin:0 auto">
      <div nz-col nzFlex="auto" style="background-color: white;border-radius: 10px;box-shadow: 0 1px 2px gray">
        <div nz-row>
          <div nz-col nzSpan="10" style="padding:0px 15px;background-color: #BFECD0;;border-radius: 10px 0 0 10px;">
            <div class="form-title line_bank_h4" style="margin:10px 0 ;">案件編號</div>
            <div class="form" style="display: block;margin-bottom:10px;padding:0px">
              <div><input matInput #input class="form-control" [(ngModel)]="swcApplno" name="swcApplno" required>
              </div>
            </div>
          </div>
          <div nz-col nzSpan="10" style="padding:0px 15px;">
            <span class="form-title line_bank_h4" style="margin:10px 0 ;">身分證號</span>
            <div class="form" style="display: block;margin-bottom:10px;padding:0px">
              <div><input matInput #input class="form-control" [(ngModel)]="swcID" name="swcID" required>
              </div>
            </div>
          </div>

          <div nz-col  nzSpan="4" style="background-color: #BFECD0;text-align: center;padding:33px;;border-radius: 0 10px 10px 0;">
            <div >
                <button nz-button [nzSize]="'middle'" nzType="primary" (click)="select()">查詢案件</button>
            </div>
        </div>
        </div>
      </div>

    </div>
    <div>
    </div>
  </div>
  <div class="content">
    <div #absBox class="abs-box">
      <div nz-col nzSpan="24">
        <div class="line_bank_card_no_padding">
          <nz-table nzShowSizeChanger [nzData]="cusinfoDataSource" [nzFrontPagination]="true" [nzSimple]="false"
            [nzLoading]="loading" [nzTotal]="total" [nzPageSize]="pageSize" [nzPageIndex]="pageIndex" #middleTable
            style="height:30vh" nzFooter="案件數: {{this.total}} 件"
            nzSize="small" nzTitle="FRAUD案件清單" [nzScroll]="{ x: '1500px', y:'240px'}"
            (nzQueryParams)="onQueryParamsChange($event)">
            <thead style="max-height: 100vh;">
              <!-- <div style="text-align:right;width: 90vw; font-size: 16px;">
                <span>案件數: {{this.total}} 件</span>
              </div> -->
              <tr>
                <th class="table-header" [nzLeft]="true" [nzWidth]="'160px'">收件編號</th>
                <th class="table-header" [nzWidth]="'160px'">流程別</th>
                <th class="table-header" [nzWidth]="'160px'">是否重查完成</th>
                <th class="table-header" [nzWidth]="'160px'">進件時間</th>
                <th class="table-header" [nzWidth]="'160px'">身分證號</th>
                <th class="table-header" [nzWidth]="'160px'">姓名</th>
                <th class="table-header" [nzWidth]="'200px'">公司名稱</th>
                <th class="table-header" [nzWidth]="'160px'">客群標籤</th>
                <th class="table-header" [nzWidth]="'160px'">申請金額/額度</th>
                <th class="table-header" [nzWidth]="'160px'">風險等級分群</th>
                <th class="table-header" [nzWidth]="'160px'">累積進件</th>
                <th class="table-header" [nzWidth]="'160px'">審核結果</th>
                <th class="table-header" [nzWidth]="'160px'">通知</th>
                <th class="table-header" [nzRight]="true" [nzWidth]="'220px'">案件註記</th>
                <th class="table-header" [nzRight]="true" [nzWidth]="'100px'">儲存</th>
              </tr>
            </thead>
            <tbody >
              <tr *ngFor="let data of cusinfoDataSource" style="height: 100%;">
                <td class="table-data" [nzLeft]="true" style="text-align: center;">
                  <!-- <button nz-button [nzSize]="'middle'" nzType="link" *ngIf="data.swcReadyForReview=='N'"
                    [disabled]="true">
                    {{data.swcApplno}}
                  </button> -->
                  <button nz-button [nzSize]="'middle'" nzType="link"
                    (click)="getLockCase(data.swcApplno, data.swcID)">
                    {{data.swcApplno}}
                  </button>
                </td>
                <td class="table-data">{{ getOptionCaseType(data.swcFlowType) }}</td>
                <td class="table-data">{{ data.swcReadyForReview }}</td>
                <td class="table-data">{{ data.swcZ21PassDate |date: 'yyyy-MM-dd' }}
                </td>
                <td class="table-data">{{ data.swcID }}</td>
                <td class="table-data">{{ data.swcName }}</td>
                <td class="table-data">{{ data.swcCompany }}</td>
                <td class="table-data">{{ data.swcCreditLimit }}</td>
                <td class="table-data">{{ data.swcCusGroupTag }}</td>
                <td class="table-data">{{ data.swcRiskLevelGroup }}</td>
                <td class="table-data">{{ data.swcEnterCount }}</td>
                <td class="table-data">{{ data.swcResult }}</td>
                <td class="table-data">
                  <button nz-button id="test" [nzSize]="'middle'" *ngIf="data.swcNotifyMsg==''" [disabled]="true"
                    nzType="primary">通知</button>
                  <button nz-button id="test" [nzSize]="'middle'" *ngIf="data.swcNotifyMsg!=''"
                    (click)="openNotifyMsg(data.swcApplno)" nzType="primary">通知</button>
                </td>
                <td class="table-data" [nzRight]="true">
                  <input matInput #input class="form-control" [(ngModel)]="data.swcCaseMemo" name="note"
                    placeholder="請輸入註記" required>
                </td>
                <td class="table-data btn_test" [nzRight]="true" style="text-align: center;">
                  <button nz-button id="test" nzType="primary"
                    (click)="saveCaseMemo(data.swcApplno, data.swcCaseMemo)">儲存</button>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>
    </div>
  </div>
</div>
